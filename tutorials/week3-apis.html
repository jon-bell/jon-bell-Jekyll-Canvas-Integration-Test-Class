

<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  

  <link rel="shortcut icon" href="/jon-bell-Jekyll-Canvas-Integration-Test-Class/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/jon-bell-Jekyll-Canvas-Integration-Test-Class/assets/css/just-the-docs-default.css">

  

  
    <script type="text/javascript" src="/jon-bell-Jekyll-Canvas-Integration-Test-Class/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/jon-bell-Jekyll-Canvas-Integration-Test-Class/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Testing APIs | Canvas/Jekyll Sandbox</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Testing APIs" />
<meta name="author" content="Jonathan Bell" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A sandbox Jekyll installation to hook up to Canvas LMS" />
<meta property="og:description" content="A sandbox Jekyll installation to hook up to Canvas LMS" />
<link rel="canonical" href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/tutorials/week3-apis" />
<meta property="og:url" content="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/tutorials/week3-apis" />
<meta property="og:site_name" content="Canvas/Jekyll Sandbox" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Testing APIs" />
<script type="application/ld+json">
{"description":"A sandbox Jekyll installation to hook up to Canvas LMS","url":"https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/tutorials/week3-apis","@type":"WebPage","author":{"@type":"Person","name":"Jonathan Bell"},"headline":"Testing APIs","dateModified":"2021-11-29T21:47:00+00:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div class="side-bar">
    <div class="site-header">
      <a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/" class="site-title lh-tight">
  Canvas/Jekyll Sandbox

</a>
      <a href="#" id="menu-button" class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav">
      
        <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/modules/" class="nav-list-link">Modules</a><ul class="nav-list "><li class="nav-list-item "><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/modules/week1-overview-design-principles" class="nav-list-link">Week 1 - Overview and Design Principles</a></li><li class="nav-list-item "><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/modules/week2-design-docs-patterns" class="nav-list-link">Week 2 - Design Documentation and Patterns</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/assignments/" class="nav-list-link">Assignments</a><ul class="nav-list "><li class="nav-list-item "><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/assignments/hw1" class="nav-list-link">Assignment 1</a></li><li class="nav-list-item "><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/assignments/hw2" class="nav-list-link">Assignment 2</a></li><li class="nav-list-item "><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/assignments/project-overview" class="nav-list-link">Project Overview</a></li><li class="nav-list-item "><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/assignments/project-deliverable" class="nav-list-link">Project Final Deliverable</a></li></ul></li><li class="nav-list-item"><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/about/" class="nav-list-link">About</a></li><li class="nav-list-item"><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/calendar/" class="nav-list-link">Calendar</a></li><li class="nav-list-item"><a href="https://jon-bell.github.io/jon-bell-Jekyll-Canvas-Integration-Test-Class/schedule/" class="nav-list-link">Schedule</a></li></ul>

      
    </nav>
    <footer class="site-footer">
      This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.
    </footer>
  </div>
  <div class="main" id="top">
    <div id="main-header" class="main-header">
      
        <div class="search">
          <div class="search-input-wrap">
            <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Canvas/Jekyll Sandbox" aria-label="Search Canvas/Jekyll Sandbox" autocomplete="off">
            <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
      
      
      
    </div>
    <div id="main-content-wrap" class="main-content-wrap">
      
        <nav aria-label="Breadcrumb" class="breadcrumb-nav">
            <ol class="breadcrumb-nav-list">
              
                <li class="breadcrumb-nav-list-item"><a href="">Tutorials</a></li>
              
              <li class="breadcrumb-nav-list-item"><span>Testing APIs</span></li>
            </ol>
          </nav>
        
      
      <div id="main-content" class="main-content" role="main">
        
          <p>This tutorial describes how to test an API</p>

<p>Contents:</p>
<ul>
  <li><a href="#transcript-server">Setting up the transcript Server</a></li>
  <li><a href="#postman-api">How to use Postman to test an API</a></li>
  <li><a href="#curl-api">How to use CURL to test an API</a></li>
  <li><a href="#transcript-postman-curl">Testing the transcript server with Postman and Curl</a></li>
  <li><a href="#add-routes-server">How to add routes to the transcript server</a></li>
</ul>
      <h1 id="setting-up-the-transcript-server">
        
        
          <a href="#setting-up-the-transcript-server" class="anchor-heading" aria-labelledby="setting-up-the-transcript-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up the transcript Server
        
        
      </h1>
    

<p>To get the project with the transcript server, download the <a href="../Examples/Example%203.1%20transcript-server.zip">Example_3.1.zip</a> and extract the contents of the zip file to your local machine.</p>

<p>Use your terminal to navigate to the top level directory of the server such that the current working directory is “*/Example_3.1”. Use ‘npm install’ to install necessary dependencies. Use the command ‘npm start’ to start the server.</p>

<p>The screen should now show the initial list of transcripts for students in the database and the location of the server:</p>

<p><img src="./assets/week3-apis/server_start.png" alt="image" /></p>
      <h1 id="how-to-use-postman-to-test-an-api">
        
        
          <a href="#how-to-use-postman-to-test-an-api" class="anchor-heading" aria-labelledby="how-to-use-postman-to-test-an-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to use Postman to test an API
        
        
      </h1>
    

<p><em>Note:</em> Make sure the transcript server is running.</p>

<p>Download the <a href="https://www.postman.com/downloads/">Postman app</a>.</p>

<p>Once you have Postman downloaded, open the application. To start, we will first create a new Workspace. Go to the top left part of the application window and select the “Workspaces” button. In the dropdown, select “New Workspace” and give the workspace a name.</p>

<p><img src="./assets/week3-apis/new_workspace.png" alt="image" /></p>

<p>Once you have your workspace, create a new collection by selecting “New” from the left sidebar and selecting “Collection” from the available options. Name the new collection ‘typescript-server’. Note that you can choose any name for your collection, and this choice will not effect how the requests are made.</p>

<p><img src="./assets/week3-apis/new_collection.png" alt="image" /></p>

<p>To make a new request, go to “New” (in the button bar within the window, located under the larger button that says “Explore”) and select “New Request”. Name the request “Basic Get”, as we will be getting the root resource from the server, sometimes noted as a simple backslash (‘/’). Under “Select a collection or folder to save to:”, attach this request to the ‘typescript-server’ collection we created.</p>

<p><img src="./assets/week3-apis/new_request.png" alt="image" /></p>

<p>In the top section of the screen, there is a text-entry bar with a dropdown on the right side that lets you select GET, POST, PUT, DELETE, as well as several other possible HTTP commands you might use to interact with the server. Leave the current action as GET for now.</p>

<p><img src="./assets/week3-apis/blank_postman_screen.png" alt="image" /></p>

<p>In the text-entry field next to the dropdown, enter ‘localhost:4001/’. Once you have this entered into the field, click the ‘Send’ button.</p>

<p><img src="./assets/week3-apis/postman_pre_basic_get.png" alt="image" /></p>

<p>The bottom portion of the screen should now contain the statement “This is GET number 1 on the current server”.</p>

<p><img src="./assets/week3-apis/postman_post_basic_get.png" alt="image" /></p>

<p>If you go back to the terminal running your server, you should see ‘Handling GET/ 1’ printed to the screen.</p>

<p><img src="./assets/week3-apis/server_after_basic_get.png" alt="image" /></p>

<p>For more requests, check out the section on <a href="#transcript-postman-curl">Testing the transcript server with Postman and Curl</a></p>
      <h1 id="how-to-use-curl-to-test-an-api">
        
        
          <a href="#how-to-use-curl-to-test-an-api" class="anchor-heading" aria-labelledby="how-to-use-curl-to-test-an-api"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to use CURL to test an API
        
        
      </h1>
    

<p>Installing Curl</p>

<ul>
  <li>For Windows: Install Git and Git Bash as given in the <a href="/jon-bell-Jekyll-Canvas-Integration-Test-Class/tutorials/week2-git">git tutorial</a>.</li>
  <li>For Linux: Open a terminal and Run the command: <code class="language-plaintext highlighter-rouge">*sudo apt-get install -y curl*</code>.</li>
  <li>For MAC: Open a terminal and Run the command: <code class="language-plaintext highlighter-rouge">*brew install curl*</code>.</li>
</ul>

<p>Open <em>git bash</em> on Windows or a <em>terminal</em> on Linux/Mac.</p>

<p>Verify that Curl is installed using the command <code class="language-plaintext highlighter-rouge">*curl --help*</code>.</p>

<p><img src="./assets/week3-apis/curl_verify.PNG" alt="image" /></p>

<p>All the following commands will be run in the same terminal.</p>

<p>Let us start by making a simple get request to the root resource from the server, sometimes noted as a simple backslash (‘/’).
In order to do this, run the command:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">*curl -i http://localhost:4001/*</code></li>
</ul>

<p><em>Note:</em> The flag <em>-i</em> is optional and is used to display additional information such as headers.</p>

<p><img src="./assets/week3-apis/curl_basic_get.PNG" alt="image" /></p>

<p>If you go back to the terminal running your server, you should see ‘Handling GET/ 1’ printed to the screen.</p>

<p><img src="./assets/week3-apis/server_after_basic_get.png" alt="image" /></p>

<p>For more requests, check out the section on <a href="#transcript-postman-curl">Testing the transcript server with Postman and Curl</a></p>
      <h1 id="testing-the-transcript-server-with-postman-and-curl">
        
        
          <a href="#testing-the-transcript-server-with-postman-and-curl" class="anchor-heading" aria-labelledby="testing-the-transcript-server-with-postman-and-curl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Testing the transcript server with Postman and Curl
        
        
      </h1>
    

<p>Now that we have made a basic get request using Postman and Curl, let us explore the other routes of our server.</p>
      <h2 id="get-transcripts">
        
        
          <a href="#get-transcripts" class="anchor-heading" aria-labelledby="get-transcripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GET /transcripts
        
        
      </h2>
    
      <h3 id="with-postman">
        
        
          <a href="#with-postman" class="anchor-heading" aria-labelledby="with-postman"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Postman
        
        
      </h3>
    
<ul>
  <li>Return to the Postman application. Create a new request and name the request “Get Transcripts”. Like the previous request, leave the server action as GET, except this time put “localhost:4001/transcripts” in the text-entry field.
    <ul>
      <li><img src="./assets/week3-apis/postman_transcripts_pre.png" alt="image" /></li>
    </ul>
  </li>
  <li>Once you have this entered, click “Send”. In the bottom part of the screen, you should see the server returned 4 JSON objects corresponding to 4 students in the the class. Each object contains the student’s ID and the student’s name under an object named “student”, and the student’s grade as a collection corresponding to a field named “grades”.
    <ul>
      <li><img src="./assets/week3-apis/postman_transcripts_post.png" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h3 id="with-curl">
        
        
          <a href="#with-curl" class="anchor-heading" aria-labelledby="with-curl"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Curl
        
        
      </h3>
    
<ul>
  <li>Run the following command in curl to make a GET request to the “/transcripts” route:
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*curl -X GET http://localhost:4001/transcripts*</code>.
        <ul>
          <li><em>Note:</em> <code class="language-plaintext highlighter-rouge">*-X GET*</code> is used to specify the request type as GET (default is GET).</li>
        </ul>
      </li>
      <li>you should see the server returned 4 JSON objects corresponding to 4 students in the the class. Each object contains the student’s ID and the student’s name under an object named “student”, and the student’s grade as a collection corresponding to a field named “grades”.</li>
      <li><img src="./assets/week3-apis/curl_transcripts.PNG" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h3 id="result-on-the-server">
        
        
          <a href="#result-on-the-server" class="anchor-heading" aria-labelledby="result-on-the-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Result on the server
        
        
      </h3>
    
<ul>
  <li>If you return to the server, you should see the statement “Handling GET/transcripts” along with a collection of objects corresponding to the JSON object in the Postman server.
    <ul>
      <li><img src="./assets/week3-apis/server_transcripts.png" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h2 id="post-transcripts">
        
        
          <a href="#post-transcripts" class="anchor-heading" aria-labelledby="post-transcripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> POST /transcripts
        
        
      </h2>
    

<ul>
  <li>Now, we’re going to make a Post request to the server to add a new student to the database.</li>
</ul>
      <h3 id="with-postman-1">
        
        
          <a href="#with-postman-1" class="anchor-heading" aria-labelledby="with-postman-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Postman
        
        
      </h3>
    
<ul>
  <li>Return to the Postman application. Create a new request and name the request “Post New Student”.</li>
  <li>On the new request, go to the action drop down and change the action from GET to POST. In the text-entry field, enter ‘localhost:4001/transcripts’.</li>
  <li>Now, beneath the text entry field, there are several options: Params, Authorization, Headers, Body, Pre-request Script, Tests, and Settings. We want to work with the body of the request, so select the Body option. The Body interface will offer you several formats to enter your data; we are going to use x-www-form-urlencoded.</li>
  <li>A new form should appear with fields for Key, Value, and Description. Under Key, enter “name”. Under Value, enter the name of the student you would like to add. Note, you do not need quotes for these values. Leave Description empty.
    <ul>
      <li><img src="./assets/week3-apis/postman_post_new_student_pre.png" alt="image" /></li>
    </ul>
  </li>
  <li>The server should respond with a JSON object with an entry “studentID” and the id number for the new student. Remember this id number, we are going to use it later.
    <ul>
      <li><img src="./assets/week3-apis/postman_post_new_student_post.png" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h3 id="with-curl-1">
        
        
          <a href="#with-curl-1" class="anchor-heading" aria-labelledby="with-curl-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Curl
        
        
      </h3>
    
<ul>
  <li>Run the following command in curl to make a POST request to the “/transcripts” route:
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*curl -X POST -H "Content-Type: application/x-www-form-urlencoded" -d "name=Julian Casablancas" http://localhost:4001/transcripts*</code>.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">*-X POST*</code>: Sets the request type as POST.
            <ul>
              <li><code class="language-plaintext highlighter-rouge">*-H Content-Type: application/x-www-form-urlencoded*</code>: Adds the header to set Content-Type to x-www-form-urlencoded(which is the default). Use <em>application/json</em> for JSON body.</li>
              <li><code class="language-plaintext highlighter-rouge">*-d "name=Julian Casablancas"*</code>: Represents the request body in url encoded format.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>The server should respond with a JSON object with an entry “studentID” and the id number for the new student. Remember this id number, we are going to use it later.</li>
      <li><img src="./assets/week3-apis/curl_post_new_student.PNG" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h3 id="result-on-the-server-1">
        
        
          <a href="#result-on-the-server-1" class="anchor-heading" aria-labelledby="result-on-the-server-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Result on the server
        
        
      </h3>
    
<ul>
  <li>If you go back to the terminal running the typescript server, you should see a message “Handling POST/transcripts name=<name you="" entered="">, id=<student ID="" number="">". You have successfully added the student to the database connected to the typescript server.
</student></name>    <ul>
      <li><img src="./assets/week3-apis/server_post_student.png" alt="image" /></li>
    </ul>
  </li>
  <li>To verify the student has succesfully been added to the database, return to the Postman application and select our previous request “Get Transcripts” or make a get request using curl. Run this request again, and this time you should see your new student in the JSON object returned by the server.</li>
</ul>
      <h2 id="delete-transcripts">
        
        
          <a href="#delete-transcripts" class="anchor-heading" aria-labelledby="delete-transcripts"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> DELETE /transcripts
        
        
      </h2>
    

<ul>
  <li>Now, we are going to delete our new student.</li>
</ul>
      <h3 id="with-postman-2">
        
        
          <a href="#with-postman-2" class="anchor-heading" aria-labelledby="with-postman-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Postman
        
        
      </h3>
    

<ul>
  <li>In Postman, create a new request and name the request “Delete Student”.</li>
  <li>In this request, we are going to change the action from GET to DELETE in the action dropdown. In the text entry field, we are going to enter “localhost:4001/transcripts/&lt;number&gt;” where &lt;number&gt; is the id of the student you added to the server database in the previous step (5 in our example).
    <ul>
      <li><img src="./assets/week3-apis/postman_delete_student_pre.png" alt="image" /></li>
    </ul>
  </li>
  <li>Once you have this entered, click “Send”. The server should respond with “OK” in the bottom part of the Postman app.
    <ul>
      <li><img src="./assets/week3-apis/postman_delete_student_post.png" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h3 id="with-curl-2">
        
        
          <a href="#with-curl-2" class="anchor-heading" aria-labelledby="with-curl-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> With Curl
        
        
      </h3>
    

<ul>
  <li>Run the following command in curl to make a DELETE request to the “/transcripts” route:
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*curl -X DELETE http://localhost:4001/transcripts/5*</code>.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">*-X DELETE*</code>: Sets the request type as POST.
            <ul>
              <li><code class="language-plaintext highlighter-rouge">*5*</code>: Represents the ID of the student to delete.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li>The server should delete the student and respond with “OK”.</li>
      <li><img src="./assets/week3-apis/curl_delete_student.PNG" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h3 id="result-on-the-server-2">
        
        
          <a href="#result-on-the-server-2" class="anchor-heading" aria-labelledby="result-on-the-server-2"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Result on the server
        
        
      </h3>
    
<ul>
  <li>If you return to the terminal running the server, you should see the message “Handling DEL /transcripts, id = 5”.
    <ul>
      <li><img src="./assets/week3-apis/server_delete_student.png" alt="image" /></li>
    </ul>
  </li>
</ul>
      <h1 id="how-to-add-routes-to-the-transcript-server">
        
        
          <a href="#how-to-add-routes-to-the-transcript-server" class="anchor-heading" aria-labelledby="how-to-add-routes-to-the-transcript-server"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> How to add routes to the transcript server
        
        
      </h1>
    

<p>To better understand how the server is serving these requests, look at index.ts in the example_3.1 project files. The server is using the Express library to serve the requests. The local variable ‘app’ is how the server interacts with requests made from Postman. For example, app.get(‘/transcripts’ (req, res) =&gt; { on line 59 is how we get the transcripts from a request to our API.</p>

<p><img src="./assets/week3-apis/vscode_app_get.png" alt="image" /></p>

<p>The behavior defined in the internal anonymous function for this request is what is returned to the client. The rest of our calls work the same way. Try looking at some of the other resources and use Postman to get information, post information, or delete information from the server!</p>

<p>Now that we have some idea about the server and it’s code, let us add a new route to the server. Let us assume there is a new requirement in the project which would allow students to upload their transcripts to the server as text files. Let us try to implement a simple file upload feature to the server.</p>

<ol>
  <li>In order to handle file uploads, we must install the fileupload package for express. This can be done by running the following command at the root of our project (where package.json is located):
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*npm install --save express-fileupload*</code>.</li>
      <li><img src="./assets/week3-apis/express-fileupload.PNG" alt="image" /></li>
    </ul>
  </li>
  <li>Let us import this package in index.ts as below:
    <ul>
      <li>
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">fileUpload</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">express-fileupload</span><span class="dl">'</span><span class="p">;</span>
</code></pre></div>        </div>
      </li>
    </ul>
  </li>
  <li>Next, we must register the middleware for express as below:
    <ul>
      <li>
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">fileUpload</span><span class="p">());</span>
</code></pre></div>        </div>
      </li>
      <li><em>Note:</em> This should happen <strong>after</strong> the call to app creation:
        <ul>
          <li>
            <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1">// create the server, call it app</span>
 <span class="kd">const</span> <span class="nx">app</span><span class="p">:</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Application</span> <span class="o">=</span> <span class="nx">express</span><span class="p">();</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
      <li><em>Note:</em> This should happen <strong>before</strong> registration of routes:
        <ul>
          <li>
            <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">app</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">/</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">:</span><span class="nx">express</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span><span class="nx">express</span><span class="p">.</span><span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
     <span class="nx">ngets</span><span class="o">++</span><span class="p">;</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">`Handling GET/`</span><span class="p">,</span><span class="nx">ngets</span><span class="p">)</span>
     <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="s2">`This is GET number </span><span class="p">${</span><span class="nx">ngets</span><span class="p">}</span><span class="s2"> on the current server`</span><span class="p">);</span>
 <span class="p">});</span>
</code></pre></div>            </div>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Next we need to implement a route for file uploads, and register a handler for it. This can be done as below:
    <ul>
      <li>
        <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">app</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="dl">'</span><span class="s1">/upload</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">req</span><span class="p">:</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Request</span><span class="p">,</span> <span class="nx">res</span><span class="p">:</span> <span class="nx">express</span><span class="p">.</span><span class="nx">Response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>

     <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">req</span><span class="p">).</span><span class="nx">files</span> <span class="o">||</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">((</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">req</span><span class="p">).</span><span class="nx">files</span><span class="p">).</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">500</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">Failed</span><span class="dl">'</span><span class="p">);</span>
         <span class="k">return</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">File info: </span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">req</span><span class="p">).</span><span class="nx">files</span><span class="p">.</span><span class="nx">myFile</span><span class="p">);</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Contents of file: </span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">req</span><span class="p">).</span><span class="nx">files</span><span class="p">.</span><span class="nx">myFile</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
     <span class="nx">res</span><span class="p">.</span><span class="nx">status</span><span class="p">(</span><span class="mi">200</span><span class="p">).</span><span class="nx">send</span><span class="p">(</span><span class="dl">'</span><span class="s1">File Upload Successful</span><span class="dl">'</span><span class="p">);</span>

 <span class="p">});</span>
</code></pre></div>        </div>
      </li>
      <li>The code registers a POST route at “/upload”</li>
      <li>If no files are uploaded, it responds with a 500 status code.</li>
      <li>If a file is uploaded, it’s contents are printed and the server responds with a status code of 200.</li>
      <li><em>Note:</em> Our example assumes the file to be uploaded with the key “myFile” in our post request. You may choose any name you like, as long as the corresponding change is made in the request.</li>
    </ul>
  </li>
  <li>Start the server using the command:
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*npm start*</code>.</li>
    </ul>
  </li>
  <li>Create a sample text file to test this route. I have used the below command:
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*echo "These are the contents of my test file." &gt; test.txt*</code></li>
    </ul>
  </li>
  <li>Now, let us test the route using curl as below:
    <ul>
      <li>Command: <code class="language-plaintext highlighter-rouge">*curl -F "myFile=@./test.txt" http://localhost:4001/upload*</code>.
        <ul>
          <li><code class="language-plaintext highlighter-rouge">*-F "myFile=@./test.txt"*</code>: Sets the file to be uploaded as test.txt.
            <ul>
              <li><em>Note:</em> <strong>myFile</strong> was used because that was the key used in the request handler.</li>
              <li>Headers and request method are automatically set by curl.</li>
            </ul>
          </li>
        </ul>
      </li>
      <li><img src="./assets/week3-apis/curl_file_upload.PNG" alt="image" /></li>
    </ul>
  </li>
  <li>If you return to the terminal running the server, you should see the details of the file printed.
    <ul>
      <li><img src="./assets/week3-apis/server_file_upload.PNG" alt="image" /></li>
    </ul>
  </li>
</ol>

        

        

        
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    
  </div>
</body>
</html>

